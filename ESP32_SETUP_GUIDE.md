# ๐ค ุฏููู ุฅุนุฏุงุฏ ESP32 - ุงูุฏููุฉ ุงูุฐููุฉ

## ๐งธ **ูุธุฑุฉ ุนุงูุฉ**

ุงูุขู ุจุนุฏ ุชุดุบูู ุงูุจุฑูุฌูุงุช ุจูุฌุงุญุ ูุญุชุงุฌ ูุฅุนุฏุงุฏ **ุงูุฌุฒุก ุงูููุฒูุงุฆู** - ุฏููุฉ ESP32 ุงูุชู ุณุชุชูุงุนู ูุน ุงูุฃุทูุงู.

---

## ๐๏ธ **ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ**

### **1. ูุทุน ุงูู Hardware:**
- **ESP32 DevKit** (ููุถู ESP32-S3 ูุน PSRAM)
- **ูููุฑูููู I2S** (ูุซู INMP441)
- **ููุจุฑ ุตูุช** ูุน **DAC** (ูุซู MAX98357A)
- **3 ุฃุฒุฑุงุฑ ุถุบุท** (Talk, Volume+, Volume-)
- **4 LED** (Status, Listening, Processing, Error)
- **ุจุทุงุฑูุฉ ููุซููู** 3.7V (ุงุฎุชูุงุฑู)
- **ุฃุณูุงู ุชูุตูู** ู **ููุงููุงุช**

### **2. ุจุฑุงูุฌ ุงูุชุทููุฑ:**
- **Arduino IDE 2.x** ุฃู **PlatformIO**
- **ESP32 Board Package**
- **ููุชุจุงุช Arduino** ุงููุทููุจุฉ

---

## โ๏ธ **ุงูุฎุทูุฉ 1: ุฅุนุฏุงุฏ ุจูุฆุฉ ุงูุชุทููุฑ**

### **ุชุซุจูุช Arduino IDE:**
1. ุญููู ูู: https://www.arduino.cc/en/software
2. ุซุจูุช ESP32 Board Package:
   - File โ Preferences
   - Additional Board Manager URLs: 
     ```
     https://dl.espressif.com/dl/package_esp32_index.json
     ```
   - Tools โ Board โ Boards Manager โ ุงุจุญุซ ุนู "ESP32" ูุซุจูุช

### **ุชุซุจูุช ุงูููุชุจุงุช ุงููุทููุจุฉ:**
```cpp
// ุงูุชุญ Arduino IDE โ Tools โ Manage Libraries
// ุงุจุญุซ ูุซุจูุช ูุฐู ุงูููุชุจุงุช:

WiFi                    // ูุฏูุฌุฉ ูุน ESP32
HTTPClient              // ูุฏูุฌุฉ ูุน ESP32  
ArduinoJson             // by Benoit Blanchon
WebSockets              // by Markus Sattler
AsyncTCP                // by me-no-dev
ESPAsyncWebServer       // by me-no-dev
Preferences             // ูุฏูุฌุฉ ูุน ESP32
```

---

## ๐ **ุงูุฎุทูุฉ 2: ุงูุชูุตููุงุช ุงูููุฑุจุงุฆูุฉ**

### **ูุฎุทุท ุงูุชูุตูู:**

```
ESP32 Pin    โ    Component
=========================================
GPIO 12      โ    ุฒุฑ Talk (ูุน ููุงููุฉ Pull-up)
GPIO 13      โ    ุฒุฑ Volume+ (ูุน ููุงููุฉ Pull-up)  
GPIO 14      โ    ุฒุฑ Volume- (ูุน ููุงููุฉ Pull-up)

GPIO 2       โ    LED Status (ุฃุฎุถุฑ)
GPIO 4       โ    LED Listening (ุฃุฒุฑู)
GPIO 5       โ    LED Processing (ุฃุตูุฑ)
GPIO 18      โ    LED Error (ุฃุญูุฑ)

// I2S Microphone (INMP441)
GPIO 26      โ    I2S_BCLK (Bit Clock)
GPIO 25      โ    I2S_LRCLK (Left/Right Clock)
GPIO 33      โ    I2S_DIN (Data Input)
3.3V         โ    VCC
GND          โ    GND

// I2S Speaker (MAX98357A)
GPIO 22      โ    I2S_BCLK
GPIO 23      โ    I2S_LRCLK  
GPIO 21      โ    I2S_DIN
5V           โ    VCC
GND          โ    GND
```

### **ุตูุฑุฉ ุชูุถูุญูุฉ ููุชูุตูู:**
```
     โโโโโโโโโโโโโโโโโโโ
     โ     ESP32       โ
     โ                 โ
 โโโโโค GPIO12   GPIO2 โโโโโ LED Status
 โ   โ                 โ
 โ   โ GPIO13   GPIO4 โโโโโ LED Listening  
Talk โ                 โ
     โ GPIO14   GPIO5 โโโโโ LED Processing
 โ   โ                 โ
Vol+ โ         GPIO18 โโโโโ LED Error
     โ                 โ
 โ   โ GPIO26  GPIO22 โโโโโ
Vol- โ                 โ   โ Speaker
     โ GPIO25  GPIO23 โโโโโค I2S
     โ                 โ   โ
     โ GPIO33  GPIO21 โโโโโ
     โ                 โ
     โโโโโโโโโโโโโโโโโโโ
           โ      โ
           โ      โ
        Mic I2S  Power
```

---

## ๐ **ุงูุฎุทูุฉ 3: ุจุฑูุฌุฉ ESP32**

### **1. ุงุฎุชุฑ ุงูููุฏ ุงูููุงุณุจ:**
```cpp
// ููุงุณุชุฎุฏุงู ุงูุนุงุฏู:
esp32/secure_teddy_main.ino

// ููุฌูุฏุฉ ุงูุนุงููุฉ ูุน ุถุบุท MP3:
esp32/secure_teddy_main_mp3_enhanced.ino

// ููุงุฎุชุจุงุฑ ูุงูุชุทููุฑ:
esp32/audio_stream.ino
```

### **2. ุฅุนุฏุงุฏ ุงูููุฏ:**
```cpp
// ุงูุชุญ esp32/secure_teddy_main.ino ูู Arduino IDE

// ุนุฏูู ูุฐู ุงูุฅุนุฏุงุฏุงุช:
String server_url = "http://192.168.1.100:8000";  // IP ุงูุฎุงุต ุจู
String wifi_ssid = "ุงุณู_ุงููุงู_ูุงู";
String wifi_password = "ูููุฉ_ูุฑูุฑ_ุงููุงู_ูุงู";

// ุชุฃูุฏ ูู ุฅุนุฏุงุฏุงุช ุงูู pins:
const int BUTTON_TALK = 12;
const int LED_STATUS = 2;
// ... ุฅูุฎ
```

### **3. ุฑูุน ุงูููุฏ:**
```cpp
// 1. ูุตูู ESP32 ุจู USB
// 2. ุงุฎุชุฑ Board: "ESP32 Dev Module"
// 3. ุงุฎุชุฑ Port ุงูููุงุณุจ
// 4. ุงุถุบุท Upload
```

---

## ๐ง **ุงูุฎุทูุฉ 4: ุงูุชูููู ุงูุฃููู**

### **ุนูุฏ ุงูุชุดุบูู ูุฃูู ูุฑุฉ:**

1. **ESP32 ุณููุดุฆ ุดุจูุฉ WiFi:**
   ```
   Network: "TeddyBear_Setup"
   Password: "teddy123"
   ```

2. **ุงุชุตู ุจุงูุดุจูุฉ ูุงุฏุฎู:**
   ```
   http://192.168.4.1
   ```

3. **ุฃุฏุฎู ุฅุนุฏุงุฏุงุช WiFi:**
   - ุงุณู ุงูุดุจูุฉ ุงูุฎุงุตุฉ ุจู
   - ูููุฉ ุงููุฑูุฑ
   - IP ุงูุฎุงุต ุจุงูู Backend (ูุซู: 192.168.1.100:8000)

4. **ุญูุธ ูุฅุนุงุฏุฉ ุงูุชุดุบูู**

---

## ๐งช **ุงูุฎุทูุฉ 5: ุงุฎุชุจุงุฑ ุงููุธุงู**

### **ุงุฎุชุจุงุฑ ุงูุงุชุตุงู:**
```bash
# ูู ุงูู terminal:
curl http://localhost:8000/api/v1/devices

# ูุฌุจ ุฃู ุชุฑู ESP32 ูุณุฌู ูุฌูุงุฒ ุฌุฏูุฏ
```

### **ุงุฎุชุจุงุฑ ุงูุตูุช:**
1. **ุงุถุบุท ุฒุฑ "Talk"** ุนูู ESP32
2. **LED ุงูุฃุฒุฑู** ูุฌุจ ุฃู ูุถูุก (Listening)
3. **ุชููู** ููุฏุฉ 3-5 ุซูุงู
4. **LED ุงูุฃุตูุฑ** ูุถูุก (Processing)
5. **ุงูุฑุฏ** ูุฃุชู ูู ุงูููุจุฑ

### **ูุชุงุจุนุฉ ุงูููุฌุฒ:**
```cpp
// ุงูุชุญ Serial Monitor ูู Arduino IDE (Ctrl+Shift+M)
// ูุฌุจ ุฃู ุชุฑู:
๐งธ AI Teddy Bear - Audio Streaming v1.0
โ WiFi connected: 192.168.1.101
โ WebSocket connected to server
๐ค Audio system ready
```

---

## ๐ฏ **ุงูุชูุงูู ูุน ุงููุธุงู ุงููุงูู**

### **ุชุฏูู ุงูุจูุงูุงุช:**
```
ESP32 Mic โ I2S โ WiFi โ WebSocket โ Backend โ AI โ Response โ ESP32 Speaker
```

### **ุชุณุฌูู ุงูุฌูุงุฒ:**
```json
// ESP32 ูุฑุณู ุชููุงุฆูุงู:
{
  "device_id": "ESP32_UNIQUE_ID",
  "device_type": "teddy_bear",
  "status": "online",
  "capabilities": ["audio_input", "audio_output", "led_indicators"]
}
```

### **ูุนุฑู ุงูุทูู:**
```cpp
// ูุชู ุฑุจุท ESP32 ุจุทูู ูุนูู ุนุจุฑ:
// 1. QR Code ุนูู ุงูุฏููุฉ
// 2. ุชุทุจูู ุงููุงูุฏูู
// 3. ุฅุนุฏุงุฏ ุฃููู
```

---

## ๐ง **ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ**

### **ESP32 ูุง ูุชุตู ุจู WiFi:**
```cpp
// ุชุญูู ูู:
1. ุงุณู ุงูุดุจูุฉ ููููุฉ ุงููุฑูุฑ ุตุญูุญุฉ
2. ุงูุดุจูุฉ 2.4GHz (ููุณุช 5GHz)
3. ููุฉ ุงูุฅุดุงุฑุฉ ูุงููุฉ
4. ุฅุนุงุฏุฉ ุถุจุท ุงููุตูุน: ุงุถุบุท BOOT + EN ูุนุงู
```

### **ูุง ููุฌุฏ ุตูุช:**
```cpp
// ุชุญูู ูู:
1. ุชูุตูู I2S ุตุญูุญ
2. ูุตุฏุฑ ุงูุทุงูุฉ ูุงูู (5V ููููุจุฑ)
3. ูุณุชูู ุงูุตูุช (ุฃุฒุฑุงุฑ Volume)
4. ูุงุจู ุงูุตูุช ุณููู
```

### **ESP32 ูุง ูุธูุฑ ูู Backend:**
```cpp
// ุชุญูู ูู:
1. Backend ูุนูู ุนูู http://IP:8000
2. Firewall ูุณูุญ ุจุงูุงุชุตุงู
3. WebSocket ููุนูู
4. Device ID ููุนุฑูู ุตุญูุญ
```

### **ุฌูุฏุฉ ุงูุตูุช ุถุนููุฉ:**
```cpp
// ุญููู:
1. ุงุณุชุฎุฏู esp32/secure_teddy_main_mp3_enhanced.ino
2. ุชุญูู ูู ุฌูุฏุฉ ุงููููุฑูููู
3. ูุฑูุจ ุงููููุฑูููู ูู ุงููุชููู
4. ููู ุงูุถูุถุงุก ุงููุญูุทุฉ
```

---

## ๐ **ูุฑุงูุจุฉ ุงูุฃุฏุงุก**

### **ูู Arduino Serial Monitor:**
```cpp
๐ค Captured: 1024 samples, Level: 156
๐ก WebSocket: Connected, Latency: 45ms
๐ Battery: 87%, Free heap: 234KB
โก CPU: 45%, WiFi: -55dBm
```

### **ูู Backend Dashboard:**
```json
{
  "device_id": "ESP32_ABC123",
  "status": "online",
  "last_seen": "2025-01-01T12:00:00Z",
  "audio_quality": "good",
  "wifi_strength": -55,
  "battery_level": 87
}
```

---

## ๐ฏ **ุงูุงุณุชุฎุฏุงู ุงููููู**

### **ุณููุงุฑูู ุงูุงุณุชุฎุฏุงู:**
1. **ุทูู ูุถุบุท ุฒุฑ "Talk"**
2. **LED ุฃุฒุฑู ูุถูุก** โ "ููููู ุงูุชุญุฏุซ ุงูุขู"
3. **ุทูู ูุชููู:** "ูุฑุญุจุง ุฏุจุฏูุจู!"
4. **LED ุฃุตูุฑ ูุถูุก** โ "ุฃููุฑ ูู ุงูุฑุฏ..."
5. **ุงูุฑุฏ ูุฃุชู:** "ูุฑุญุจุง ุญุจูุจู! ููู ุญุงูู ุงููููุ"
6. **LED ุฃุฎุถุฑ ุซุงุจุช** โ "ุฌุงูุฒ ููุญุฏูุซ ุงูุชุงูู"

### **ูุคุดุฑุงุช LED:**
- ๐ข **ุฃุฎุถุฑ ุซุงุจุช:** ูุชุตู ูุฌุงูุฒ
- ๐ต **ุฃุฒุฑู ูุฑูุด:** ูุณุชูุน ููุทูู  
- ๐ก **ุฃุตูุฑ ูุฑูุด:** ูุนุงูุฌ ุงูุทูุจ
- ๐ด **ุฃุญูุฑ:** ุฎุทุฃ ุฃู ุงููุทุงุน ุงูุงุชุตุงู

---

## ๐ **ุงูุฎุทูุงุช ุงูุชุงููุฉ**

### **ุจุนุฏ ุฅุชูุงู ESP32:**
1. **ุงุฎุชุจุงุฑ ุงูุชูุงุนู ุงููุงูู** 
2. **ุฑุจุท ุชุทุจูู ุงููุงูุฏูู**
3. **ุฅุนุฏุงุฏ ูููุงุช ุงูุฃุทูุงู**
4. **ุชุฎุตูุต ุงูุฑุฏูุฏ**
5. **ูุฑุงูุจุฉ ุงูุงุณุชุฎุฏุงู**

### **ุงูุชุญุณููุงุช ุงููุชูุฏูุฉ:**
- **ุถุบุท ุตูุช MP3** ููุฌูุฏุฉ ุงูุนุงููุฉ
- **ูุถุน ุชูููุฑ ุงูุทุงูุฉ** ููุจุทุงุฑูุฉ
- **ุชุญุฏูุซุงุช OTA** ุนุจุฑ ุงูุดุจูุฉ
- **ูุณุชุดุนุฑุงุช ุฅุถุงููุฉ** (ุญุฑุงุฑุฉุ ุญุฑูุฉ)

---

## โ **ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ**

- [ ] ESP32 ูุชุตู ูููุนุฑูู
- [ ] ุงูุตูุช ูุนูู (ุฏุฎู ูุฎุฑุฌ)
- [ ] LED ุชุนูู ุจุดูู ุตุญูุญ
- [ ] WebSocket ูุชุตู ุจู Backend
- [ ] ุงูุฌูุงุฒ ูุธูุฑ ูู Dashboard
- [ ] ุงูุชูุงุนู ุงูุตูุชู ูุนูู
- [ ] ุจูุงูุงุช ุงูุทูู ูุญููุธุฉ

**๐ ุชูุงูููุง! ุฏููุชู ุงูุฐููุฉ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู!** 